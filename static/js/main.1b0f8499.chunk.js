(this.webpackJsonpbookstore=this.webpackJsonpbookstore||[]).push([[0],{20:function(e,t,a){e.exports=a(32)},25:function(e,t,a){},31:function(e,t,a){},32:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(10),i=a.n(o),l=(a(25),a(1)),c=a(2),s=a(5),u=a(3),p=a(11),h=a(4),m=a(6),d="CREATE_BOOK",f="REMOVE_BOOK",b="CHANGE_FILTER";function g(e){return{type:f,id:e.id}}var k=a(12),v=a(18),y=["Action","Biography","History","Horror","Kids","Learning","Sci-Fi"],E=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).handleChange=function(e){a.setState(Object(v.a)({},e.target.name,e.target.value))},a.handleSubmit=function(e){e.preventDefault(),""===a.state.title?alert("Please provide a title"):(console.log(a.state),fetch("https://secret-meadow-93147.herokuapp.com/books",{method:"POST",headers:{Accept:"application/json","Content-type":"application/json"},body:JSON.stringify({title:a.state.title,category:a.state.category})}).then((function(){return a.props.handleApi()})),a.setState({title:""}))},a.state={title:"",category:""},a}return Object(h.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.setState({category:document.querySelector("#category").value})}},{key:"render",value:function(){var e=y.map((function(e,t){return r.a.createElement("option",{key:t,value:e},e)}));return r.a.createElement(r.a.Fragment,null,r.a.createElement("hr",null),r.a.createElement("h4",{className:"title has-text-grey is-5"},"Add New Book"),r.a.createElement("form",{className:"field is-grouped",onSubmit:this.handleSubmit},r.a.createElement("input",{className:"input",type:"text",name:"title",placeholder:"Book Title",value:this.state.title,onChange:this.handleChange}),r.a.createElement("div",{className:"select"},r.a.createElement("select",{name:"category",id:"category",value:this.state.category,onChange:this.handleChange},e)),r.a.createElement("button",{className:"button is-info"},"Add book")))}}]),t}(r.a.Component),O={createBook:function(e){return{type:d,title:e.title,category:e.category}}},j=Object(m.b)(null,O)(E),C=function(e){function t(){return Object(l.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=["All"].concat(Object(k.a)(y)).map((function(e,t){return r.a.createElement("option",{key:t},e)}));return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"field level-left"},r.a.createElement("span",{className:"level-left"},"Filter:"),r.a.createElement("div",{className:"select level-left"},r.a.createElement("select",{className:"level-left",onChange:this.props.filterHandler},e))))}}]),t}(r.a.Component),N=Object(m.b)((function(e){return{books:e.bookReducer.books}}),null)(C),A=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).handleDelete=function(e){fetch("https://secret-meadow-93147.herokuapp.com/books/".concat(e.id),{method:"DELETE",headers:{Accept:"application/json","Content-type":"application/json"}}).then((function(){return a.props.handleApi()}))},a}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this,t=this.props.book,a=t.title,n=t.category;return r.a.createElement("tr",{className:"box"},r.a.createElement("td",{className:"is-size-5 has-text-grey"},n),r.a.createElement("td",{className:"title is-4"},a),r.a.createElement("td",null,r.a.createElement("button",{className:"button is-danger is-outlined is-small",onClick:function(){return e.handleDelete(e.props.book)}},"Remove")))}}]),t}(r.a.Component),P={removeBook:g},S=Object(m.b)(null,P)(A),B=function(e){function t(){return Object(l.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this,t=this.props.page.perPage-1,a=this.props.page.page,n=this.props.itens.slice(t*a-t+a-1,a*t+a).map((function(t){return r.a.createElement(S,{key:t.id,book:t,handleApi:e.props.handleApi})}));return r.a.createElement((function(){return r.a.createElement("table",null,r.a.createElement("tbody",null,n))}),null)}}]),t}(r.a.Component),w=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).handlePage=function(e){switch(e.target.innerHTML){case"Previous":a.state.page>1&&a.setState({page:a.state.page-1});break;case"Next page":a.state.page<Math.ceil(a.props.itens.length/a.state.perPage)&&a.setState({page:a.state.page+1});break;default:a.setState({page:parseInt(e.target.innerHTML)})}},a.state={page:1,perPage:6},a}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){for(var e=this,t=Math.ceil(this.props.itens.length/this.state.perPage),a=[],n=1;n<=t;n++)a.push(n);var o=a.map((function(t){return e.state.page===t?r.a.createElement("li",{key:a.indexOf(t)},r.a.createElement("div",{name:t,className:"pagination-link is-current",onClick:e.handlePage},t)):r.a.createElement("li",{key:a.indexOf(t)},r.a.createElement("div",{name:t,className:"pagination-link",onClick:e.handlePage},t))})),i=function(){return r.a.createElement("nav",{className:"pagination is-centered",role:"navigation","aria-label":"pagination"},r.a.createElement("div",{className:"pagination-previous",onClick:e.handlePage},"Previous"),r.a.createElement("div",{className:"pagination-next",onClick:e.handlePage},"Next page"),r.a.createElement("ul",{className:"pagination-list"},o))};return r.a.createElement((function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(B,{page:e.state,itens:e.props.itens,handleApi:e.props.handleApi}),r.a.createElement(i,null))}),null)}}]),t}(r.a.Component),F=a(19),H=a.n(F),x=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).handleFilterChange=function(e){a.props.changeFilter(e.target.value)},a.state={books:[],loading:!1},a.fetchBooks=a.fetchBooks.bind(Object(p.a)(a)),a}return Object(h.a)(t,e),Object(c.a)(t,[{key:"fetchBooks",value:function(){var e=this;this.setState({loading:!0}),fetch("https://secret-meadow-93147.herokuapp.com/books",{method:"GET",headers:{Accept:"application/json","Content-type":"application/json"}}).then((function(e){return e.json()})).then((function(t){e.setState({books:t,loading:!1})}))}},{key:"componentDidMount",value:function(){this.fetchBooks()}},{key:"render",value:function(){var e=this,t=null===this.props.filter?this.state.books:this.state.books.filter((function(t){return t.category===e.props.filter}));return r.a.createElement(r.a.Fragment,null,r.a.createElement(N,{filterHandler:this.handleFilterChange}),r.a.createElement((function(){return!1===e.state.loading?r.a.createElement(w,{itens:t,handleApi:e.fetchBooks}):r.a.createElement(H.a,{type:"bars",color:"#0290ff",height:200,width:100})}),null),r.a.createElement(j,{handleApi:this.fetchBooks}))}}]),t}(r.a.Component),M={removeBook:g,changeFilter:function(e){return{type:b,filter:e}}},R=Object(m.b)((function(e){return{books:e.bookReducer.books,filter:e.filterReducer.filter}}),M)(x);a(31);var T=function(){return r.a.createElement("div",null,r.a.createElement(R,null))},D=a(9),L={books:[{id:1,title:"Harry Potter Prisoners of Caban",category:"Action"},{id:2,title:"Harry Potter Archbishop of Luton",category:"Horror"},{id:3,title:"Harry Potter King of Scotland",category:"Action"}]},K={filter:null},I=Object(D.b)({bookReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:L,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case d:var a=Math.floor(9999*Math.random());return{books:[].concat(Object(k.a)(e.books),[{id:a,title:t.title,category:t.category}])};case f:return{books:e.books.filter((function(e){return e.id!==t.id}))};default:return e}},filterReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:K,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case b:return"All"!==t.filter?{filter:t.filter}:{filter:null};default:return e}}}),J=Object(D.c)(I);i.a.render(r.a.createElement(m.a,{store:J},r.a.createElement(T,null)),document.getElementById("root"))}},[[20,1,2]]]);
//# sourceMappingURL=main.1b0f8499.chunk.js.map